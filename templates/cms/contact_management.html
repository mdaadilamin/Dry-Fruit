{% extends 'base.html' %}
{% load static %}

{% block title %}Contact Information Management - DRY FRUITS DELIGHT CMS{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row">
        <div class="col-12">
            <h1 class="display-4 fw-bold mb-4">Contact Information Management</h1>
            <p class="lead mb-4">Update your business contact information, social media links, and business hours.</p>
            
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            {% endif %}
            
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Contact Details</h5>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="business_name" class="form-label fw-bold">Business Name</label>
                                    <input type="text" class="form-control" id="business_name" name="business_name" value="{{ contact_info.business_name }}" required>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="tagline" class="form-label fw-bold">Tagline</label>
                                    <input type="text" class="form-control" id="tagline" name="tagline" value="{{ contact_info.tagline }}">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="email" class="form-label fw-bold">Email Address</label>
                                    <input type="email" class="form-control" id="email" name="email" value="{{ contact_info.email }}" required>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="phone" class="form-label fw-bold">Phone Number</label>
                                    <input type="text" class="form-control" id="phone" name="phone" value="{{ contact_info.phone }}" required>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="whatsapp" class="form-label fw-bold">WhatsApp Number</label>
                                    <input type="text" class="form-control" id="whatsapp" name="whatsapp" value="{{ contact_info.whatsapp }}">
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="address" class="form-label fw-bold">Street Address</label>
                                    <textarea class="form-control" id="address" name="address" rows="3" required>{{ contact_info.address }}</textarea>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="city" class="form-label fw-bold">City</label>
                                            <input type="text" class="form-control" id="city" name="city" value="{{ contact_info.city }}" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="pincode" class="form-label fw-bold">Pincode/ZIP</label>
                                            <input type="text" class="form-control" id="pincode" name="pincode" value="{{ contact_info.pincode }}" required>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="business_hours" class="form-label fw-bold">Business Hours</label>
                                    <textarea class="form-control" id="business_hours" name="business_hours" rows="3">{{ contact_info.business_hours }}</textarea>
                                    <div class="form-text">Enter your business hours in a readable format (e.g., "Mon-Fri: 9AM-6PM, Sat: 10AM-4PM")</div>
                                </div>
                            </div>
                        </div>
                        
                        <hr class="my-4">
                        
                        <h5 class="mb-4">Social Media Links</h5>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="facebook_url" class="form-label fw-bold">
                                        <i data-lucide="facebook" class="me-2"></i>Facebook URL
                                    </label>
                                    <input type="url" class="form-control" id="facebook_url" name="facebook_url" value="{{ contact_info.facebook_url }}">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="instagram_url" class="form-label fw-bold">
                                        <i data-lucide="instagram" class="me-2"></i>Instagram URL
                                    </label>
                                    <input type="url" class="form-control" id="instagram_url" name="instagram_url" value="{{ contact_info.instagram_url }}">
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="twitter_url" class="form-label fw-bold">
                                        <i data-lucide="twitter" class="me-2"></i>Twitter URL
                                    </label>
                                    <input type="url" class="form-control" id="twitter_url" name="twitter_url" value="{{ contact_info.twitter_url }}">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="youtube_url" class="form-label fw-bold">
                                        <i data-lucide="youtube" class="me-2"></i>YouTube URL
                                    </label>
                                    <input type="url" class="form-control" id="youtube_url" name="youtube_url" value="{{ contact_info.youtube_url }}">
                                </div>
                            </div>
                        </div>
                        
                        <div class="d-flex justify-content-end mt-4">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i data-lucide="save" class="me-2"></i>Save Changes
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize Lucide icons
    lucide.createIcons();
    
    // Form validation
    const form = document.querySelector('form');
    if (form) {
        form.addEventListener('submit', function(e) {
            const requiredFields = form.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.classList.add('is-invalid');
                    isValid = false;
                } else {
                    field.classList.remove('is-invalid');
                }
            });
            
            if (!isValid) {
                e.preventDefault();
                alert('Please fill in all required fields.');
            }
        });
        
        // Remove validation error on input
        form.addEventListener('input', function(e) {
            if (e.target.hasAttribute('required') && e.target.value.trim()) {
                e.target.classList.remove('is-invalid');
            }
        });
    }
});
</script>
{% endblock %}